<svg viewBox="0 0 1200 950" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Enhanced Gradients -->
    <linearGradient id="islamicGreen" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1B5E20;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#2E7D32;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4CAF50;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF8F00;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#FFB300;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFD54F;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0D47A1;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#1976D2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#42A5F5;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="redGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#BF360C;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#FF5722;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FF8A65;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4A148C;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#7B1FA2;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#BA68C8;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="brownGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3E2723;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#5D4037;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8D6E63;stop-opacity:1" />
    </linearGradient>
    
    <!-- Enhanced Filters -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.4"/>
    </filter>
    
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge> 
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Islamic Pattern -->
    <pattern id="islamicPattern" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
      <rect width="40" height="40" fill="#fafafa"/>
      <circle cx="20" cy="20" r="12" fill="none" stroke="#e8f5e8" stroke-width="1" opacity="0.3"/>
      <path d="M20,8 L32,20 L20,32 L8,20 Z" fill="#e8f5e8" opacity="0.15"/>
      <circle cx="20" cy="20" r="6" fill="none" stroke="#e8f5e8" stroke-width="0.5" opacity="0.5"/>
    </pattern>
    
    <!-- Arrow Markers -->
    <marker id="arrowhead" markerWidth="12" markerHeight="8" 
            refX="11" refY="4" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 12 4, 0 8" fill="#2E7D32" opacity="0.8" />
    </marker>
    
    <marker id="goldArrow" markerWidth="12" markerHeight="8" 
            refX="11" refY="4" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 12 4, 0 8" fill="#FF8F00" opacity="0.8" />
    </marker>
  </defs>
  
  <!-- Enhanced Background -->
  <rect width="1200" height="950" fill="url(#islamicPattern)"/>
  
  <!-- Decorative Border -->
  <rect width="1200" height="950" fill="none" stroke="url(#islamicGreen)" stroke-width="4" opacity="0.6"/>
  
  <!-- Main Title with enhanced styling -->
  <g transform="translate(600, 25)">
    <rect x="-300" y="-15" width="600" height="40" rx="20" fill="url(#goldGradient)" filter="url(#shadow)"/>
    <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">
      ğŸ•Œ ToolsForUmmah - Clean Architecture
    </text>
    <text x="0" y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white" opacity="0.9">
      Islamic App Development Framework
    </text>
  </g>
  
  <!-- PRESENTATION LAYER -->
  <g id="presentationLayer">
    <rect x="50" y="80" width="1100" height="160" rx="15" fill="url(#islamicGreen)" filter="url(#shadow)"/>
    <text x="600" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white">
      ğŸ¨ Presentation Layer (Flutter UI)
    </text>
    
    <!-- Enhanced UI Components -->
    <rect x="80" y="130" width="140" height="90" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="150" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸ“± Screens &amp; Pages
    </text>
    <text x="150" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ HomeScreen</text>
    <text x="150" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ ZakatCalculatorScreen</text>
    <text x="150" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ PrayerTimesScreen</text>
    <text x="150" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ QiblaCompassScreen</text>
    
    <rect x="240" y="130" width="140" height="90" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="310" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸ§© Custom Widgets
    </text>
    <text x="310" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ IslamicAppBar</text>
    <text x="310" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ QiblaCompassWidget</text>
    <text x="310" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ PrayerTimeCard</text>
    <text x="310" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ ZakatInputForm</text>
    
    <rect x="400" y="130" width="140" height="90" rx="10" fill="url(#goldGradient)" filter="url(#shadow)"/>
    <text x="470" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      ğŸ§  State Management
    </text>
    <text x="470" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">â€¢ Riverpod Providers</text>
    <text x="470" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">â€¢ StateNotifiers</text>
    <text x="470" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">â€¢ AsyncValues</text>
    <text x="470" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">â€¢ FutureProviders</text>
    
    <rect x="560" y="130" width="140" height="90" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="630" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸ­ View Controllers
    </text>
    <text x="630" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ ZakatController</text>
    <text x="630" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ PrayerController</text>
    <text x="630" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ QiblaController</text>
    <text x="630" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ FastingController</text>
    
    <rect x="720" y="130" width="140" height="90" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="790" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸŒ Localization &amp; i18n
    </text>
    <text x="790" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ English (EN)</text>
    <text x="790" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Bengali (BN)</text>
    <text x="790" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Arabic (AR)</text>
    <text x="790" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ RTL Support</text>
    
    <rect x="880" y="130" width="140" height="90" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="950" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸ¨ Theming &amp; Design
    </text>
    <text x="950" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Islamic Color Scheme</text>
    <text x="950" y="178" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Arabic Typography</text>
    <text x="950" y="191" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Material Design 3</text>
    <text x="950" y="204" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">â€¢ Dark/Light Modes</text>
  </g>
  
  <!-- DOMAIN LAYER -->
  <g id="domainLayer">
    <rect x="50" y="270" width="1100" height="150" rx="15" fill="url(#blueGradient)" filter="url(#shadow)"/>
    <text x="600" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white">
      ğŸ›ï¸ Domain Layer (Business Logic &amp; Islamic Rules)
    </text>
    
    <rect x="80" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="145" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ“¦ Entities
    </text>
    <text x="145" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ ZakatCalculation</text>
    <text x="145" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Prayer</text>
    <text x="145" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ FastingDay</text>
    <text x="145" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ HijriDate</text>
    
    <rect x="230" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="295" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      âš™ï¸ Use Cases
    </text>
    <text x="295" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ CalculateZakatUseCase</text>
    <text x="295" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ GetPrayerTimesUseCase</text>
    <text x="295" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ TrackFastingUseCase</text>
    <text x="295" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ FindQiblaUseCase</text>
    
    <rect x="380" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="445" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ”Œ Repository Contracts
    </text>
    <text x="445" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IZakatRepository</text>
    <text x="445" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IPrayerRepository</text>
    <text x="445" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IQuranRepository</text>
    <text x="445" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IUserRepository</text>
    
    <rect x="530" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="595" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ’ Value Objects
    </text>
    <text x="595" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Money (Nisab)</text>
    <text x="595" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ GeoCoordinate</text>
    <text x="595" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QiblaDirection</text>
    <text x="595" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IslamicTime</text>
    
    <rect x="680" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="745" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ“ Islamic Business Rules
    </text>
    <text x="745" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ NisabValidator</text>
    <text x="745" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ PrayerTimeCalculator</text>
    <text x="745" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ ZakatRateCalculator</text>
    <text x="745" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QiblaCalculator</text>
    
    <rect x="830" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="895" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ”§ Domain Services
    </text>
    <text x="895" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IslamicCalculator</text>
    <text x="895" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ HijriConverter</text>
    <text x="895" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ LocationService</text>
    <text x="895" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ TimezoneDeterminer</text>
    
    <rect x="980" y="320" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="1045" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#0D47A1">
      ğŸ“¢ Domain Events
    </text>
    <text x="1045" y="355" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ ZakatCalculated</text>
    <text x="1045" y="367" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ PrayerTimeReached</text>
    <text x="1045" y="379" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ FastingCompleted</text>
    <text x="1045" y="391" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QiblaFound</text>
  </g>
  
  <!-- DATA LAYER -->
  <g id="dataLayer">
    <rect x="50" y="450" width="1100" height="150" rx="15" fill="url(#redGradient)" filter="url(#shadow)"/>
    <text x="600" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white">
      ğŸ’¾ Data Layer (Infrastructure &amp; External Services)
    </text>
    
    <rect x="80" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="147" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸ—„ï¸ Repository Impl.
    </text>
    <text x="147" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ ZakatRepositoryImpl</text>
    <text x="147" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ PrayerRepositoryImpl</text>
    <text x="147" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QuranRepositoryImpl</text>
    <text x="147" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ UserRepositoryImpl</text>
    
    <rect x="235" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="302" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸ“¡ Data Sources
    </text>
    <text x="302" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ RemoteDataSource</text>
    <text x="302" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ LocalDataSource</text>
    <text x="302" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ CacheDataSource</text>
    <text x="302" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ OfflineDataSource</text>
    
    <rect x="390" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="457" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸŒ API Clients
    </text>
    <text x="457" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QuranApiClient</text>
    <text x="457" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ AlAdhanApiClient</text>
    <text x="457" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ IslamicFinderApi</text>
    <text x="457" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ GoldPriceApiClient</text>
    
    <rect x="545" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="612" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸ’¿ Local Storage
    </text>
    <text x="612" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ HiveBoxes</text>
    <text x="612" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ SQLite (Drift)</text>
    <text x="612" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ SharedPreferences</text>
    <text x="612" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ SecureStorage</text>
    
    <rect x="700" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="767" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸ“‹ DTOs &amp; Models
    </text>
    <text x="767" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ ZakatCalculationDto</text>
    <text x="767" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ PrayerTimesDto</text>
    <text x="767" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ QuranVerseDto</text>
    <text x="767" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ UserProfileDto</text>
    
    <rect x="855" y="500" width="135" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="922" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸŒ Network Layer
    </text>
    <text x="922" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Dio HTTP Client</text>
    <text x="922" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Request Interceptors</text>
    <text x="922" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Error Handling</text>
    <text x="922" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Retry Logic</text>
    
    <rect x="1010" y="500" width="130" height="80" rx="10" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="1075" y="520" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#BF360C">
      ğŸ“ File Management
    </text>
    <text x="1075" y="535" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ PDF Generator</text>
    <text x="1075" y="547" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ File Manager</text>
    <text x="1075" y="559" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Asset Loader</text>
    <text x="1075" y="571" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">â€¢ Image Processing</text>
  </g>
  
  <!-- CORE LAYER -->
  <g id="coreLayer">
    <rect x="50" y="630" width="1100" height="130" rx="15" fill="url(#purpleGradient)" filter="url(#shadow)"/>
    <text x="600" y="660" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white">
      âš¡ Core/Shared Layer (Cross-Cutting Concerns)
    </text>
    
    <rect x="80" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="147" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸ”§ Utilities &amp; Helpers
    </text>
    <text x="147" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Extensions â€¢ Validators â€¢ Constants</text>
    <text x="147" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Islamic Calendar â€¢ Number Utils</text>
    
    <rect x="235" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="302" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸš¨ Error Handling
    </text>
    <text x="302" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Failures â€¢ Exceptions â€¢ Either</text>
    <text x="302" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Custom Error Types â€¢ Result</text>
    
    <rect x="390" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="457" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸ“ Logging &amp; Analytics
    </text>
    <text x="457" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Debug Logs â€¢ Firebase Analytics</text>
    <text x="457" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Crashlytics â€¢ Performance</text>
    
    <rect x="545" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="612" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸ’‰ Dependency Injection
    </text>
    <text x="612" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Riverpod Providers â€¢ GetIt</text>
    <text x="612" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Service Locator â€¢ DI Container</text>
    
    <rect x="700" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="767" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      âš™ï¸ Configuration
    </text>
    <text x="767" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Environment Config â€¢ API Keys</text>
    <text x="767" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Feature Flags â€¢ Settings</text>
    
    <rect x="855" y="680" width="135" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="922" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸ›¡ï¸ Security &amp; Auth
    </text>
    <text x="922" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Encryption â€¢ Biometric Auth</text>
    <text x="922" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">JWT â€¢ OAuth â€¢ Privacy</text>
    
    <rect x="1010" y="680" width="130" height="60" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="1075" y="700" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#4A148C">
      ğŸ§ª Testing Framework
    </text>
    <text x="1075" y="715" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Unit â€¢ Widget â€¢ Integration</text>
    <text x="1075" y="727" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Mocks â€¢ Golden Tests</text>
  </g>
  
  <!-- PLATFORM SERVICES LAYER -->
  <g id="platformLayer">
    <rect x="50" y="790" width="1100" height="110" rx="15" fill="url(#brownGradient)" filter="url(#shadow)"/>
    <text x="600" y="820" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
      ğŸ“± Platform Services (Device Integration &amp; Native Features)
    </text>
    
    <rect x="90" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="147" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ“ Location Services
    </text>
    <text x="147" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">GPS â€¢ Geolocator â€¢ Qibla</text>
    <text x="147" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Background Location</text>
    
    <rect x="220" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="277" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ”” Notifications
    </text>
    <text x="277" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Prayer Reminders â€¢ Athan</text>
    <text x="277" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Push Notifications</text>
    
    <rect x="350" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="407" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸµ Audio Player
    </text>
    <text x="407" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Quran Recitation â€¢ Athan</text>
    <text x="407" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Background Audio</text>
    
    <rect x="480" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="537" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ§­ Compass/Sensors
    </text>
    <text x="537" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Magnetometer â€¢ Gyroscope</text>
    <text x="537" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Device Orientation</text>
    
    <rect x="610" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="667" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ“· File System
    </text>
    <text x="667" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">PDF Export â€¢ Images</text>
    <text x="667" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Document Sharing</text>
    
    <rect x="740" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="797" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ” Biometric Auth
    </text>
    <text x="797" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Fingerprint â€¢ Face ID</text>
    <text x="797" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Local Authentication</text>
    
    <rect x="870" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="927" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸ“² App Lifecycle
    </text>
    <text x="927" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Background Tasks</text>
    <text x="927" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">State Management</text>
    
    <rect x="1000" y="840" width="115" height="50" rx="8" fill="white" opacity="0.95" filter="url(#shadow)"/>
    <text x="1057" y="860" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3E2723">
      ğŸŒ Connectivity
    </text>
    <text x="1057" y="873" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Network Status</text>
    <text x="1057" y="883" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Offline Support</text>
  </g>
  
  <!-- DEPENDENCY FLOW ARROWS -->
  <g id="dependencyFlow">
    <!-- Main vertical arrows -->
    <line x1="600" y1="240" x2="600" y2="270" stroke="url(#islamicGreen)" stroke-width="3" marker-end="url(#arrowhead)"/>
    <line x1="600" y1="420" x2="600" y2="450" stroke="url(#islamicGreen)" stroke-width="3" marker-end="url(#arrowhead)"/>
    <line x1="600" y1="600" x2="600" y2="630" stroke="url(#islamicGreen)" stroke-width="3" marker-end="url(#arrowhead)"/>
    <line x1="600" y1="760" x2="600" y2="790" stroke="url(#islamicGreen)" stroke-width="3" marker-end="url(#arrowhead)"/>
    
    <!-- Horizontal connection arrows showing data flow -->
    <path d="M 470,175 Q 500,185 530,175" stroke="url(#goldGradient)" stroke-width="2" fill="none" marker-end="url(#goldArrow)"/>
    <path d="M 445,360 Q 475,370 505,360" stroke="url(#goldGradient)" stroke-width="2" fill="none" marker-end="url(#goldArrow)"/>
    
    <!-- Dependency Labels with enhanced styling -->
    <g transform="translate(620, 255)">
      <rect x="-30" y="-8" width="60" height="16" rx="8" fill="white" opacity="0.9" stroke="url(#islamicGreen)" stroke-width="1"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1B5E20">Depends on</text>
    </g>
    
    <g transform="translate(620, 435)">
      <rect x="-30" y="-8" width="60" height="16" rx="8" fill="white" opacity="0.9" stroke="url(#islamicGreen)" stroke-width="1"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1B5E20">Implements</text>
    </g>
    
    <g transform="translate(620, 615)">
      <rect x="-25" y="-8" width="50" height="16" rx="8" fill="white" opacity="0.9" stroke="url(#islamicGreen)" stroke-width="1"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1B5E20">Uses</text>
    </g>
    
    <g transform="translate(620, 775)">
      <rect x="-30" y="-8" width="60" height="16" rx="8" fill="white" opacity="0.9" stroke="url(#islamicGreen)" stroke-width="1"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#1B5E20">Accesses</text>
    </g>
  </g>
  
  <!-- ISLAMIC DECORATIVE ELEMENTS -->
  <g id="decorativeElements">
    <!-- Enhanced corner decorations -->
    <g transform="translate(30, 30)">
      <circle r="18" fill="url(#goldGradient)" opacity="0.9" filter="url(#glow)"/>
      <path d="M-12,-12 L12,-12 L12,12 L-12,12 Z" fill="white" opacity="0.8" transform="rotate(45)"/>
      <circle r="8" fill="url(#islamicGreen)" opacity="0.7"/>
    </g>
    
    <g transform="translate(1170, 30)">
      <circle r="18" fill="url(#goldGradient)" opacity="0.9" filter="url(#glow)"/>
      <path d="M-12,-12 L12,-12 L12,12 L-12,12 Z" fill="white" opacity="0.8" transform="rotate(45)"/>
      <circle r="8" fill="url(#islamicGreen)" opacity="0.7"/>
    </g>
    
    <g transform="translate(30, 920)">
      <circle r="18" fill="url(#goldGradient)" opacity="0.9" filter="url(#glow)"/>
      <path d="M-12,-12 L12,-12 L12,12 L-12,12 Z" fill="white" opacity="0.8" transform="rotate(45)"/>
      <circle r="8" fill="url(#islamicGreen)" opacity="0.7"/>
    </g>
    
    <g transform="translate(1170, 920)">
      <circle r="18" fill="url(#goldGradient)" opacity="0.9" filter="url(#glow)"/>
      <path d="M-12,-12 L12,-12 L12,12 L-12,12 Z" fill="white" opacity="0.8" transform="rotate(45)"/>
      <circle r="8" fill="url(#islamicGreen)" opacity="0.7"/>
    </g>
  </g>
  
  <!-- ENHANCED LEGEND AND FOOTER -->
  <g id="legendFooter">
    <rect x="200" y="915" width="800" height="25" rx="12" fill="white" opacity="0.95" stroke="url(#islamicGreen)" stroke-width="2" filter="url(#shadow)"/>
    <text x="600" y="935" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1B5E20">
      ğŸ“– Clean Architecture Principle: Outer layers depend on inner layers only â€¢ Dependency Inversion
    </text>
    
    <!-- Islamic pattern footer decoration -->
    <rect x="50" y="945" width="1100" height="3" fill="url(#islamicGreen)" opacity="0.6"/>
    
    <!-- Small Islamic geometric patterns -->
    <g transform="translate(150, 935)">
      <circle r="6" fill="url(#goldGradient)" opacity="0.7"/>
      <path d="M-3,-3 L3,-3 L3,3 L-3,3 Z" fill="white" opacity="0.9" transform="rotate(45)"/>
    </g>
    
    <g transform="translate(1050, 935)">
      <circle r="6" fill="url(#goldGradient)" opacity="0.7"/>
      <path d="M-3,-3 L3,-3 L3,3 L-3,3 Z" fill="white" opacity="0.9" transform="rotate(45)"/>
    </g>
  </g>
</svg>